<!DOCTYPE html>
<html>

<head>
    <title>
    {% block title %}
    Hello World
    {% endblock %}
    </title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link href="/static/js/dynatree/skin/ui.dynatree.css" rel="stylesheet">
</head>

<body>

    <div class="navbar navbar-static-top navbar-inverse">
        <div class="navbar-inner">
            <a class="brand" href="{{ url_for('index') }}">Greglink</a>
            <ul class="nav">
            </ul>
        </div>
    </div>


    <div class="container-fluid">

        <div class="row-fluid">

            <div class="span3">
                <div id="tree"></div>
            </div>

            <div class="span9">

                <header>
                {% block header %}
                {% endblock %}
                </header>

                {% block content %}
                {% endblock %}

                <footer>
                {% block footer %}
                {% endblock %}
                </footer>

            </div>

        </div>

    </div>

    <script src="/static/js/dynatree/jquery/jquery.min.js"></script>
    <script src="/static/js/dynatree/jquery/jquery.cookie.js"></script>
    <script src="/static/js/dynatree/jquery/jquery-ui.custom.min.js"></script>
    <script src="/static/js/dynatree/jquery.dynatree.min.js"></script>
    <script src="/static/js/bootstrap.js"></script>
    <script type='text/javascript'>
    $(function() {
        var currentPath = "{{ g.current_path }}";

        $("#tree").dynatree({
            persist: true,
            cookie: {
                path: '/'
            },
            children: {{ navigation_tree()|safe }},
            onPostInit: function(isReloading, isError) {
                this.activateKey(currentPath);
            },
            onActivate: function(node) {
                if (!node.tree.isReloading()) {
                    if (node.data.href) {
                        window.open(node.data.href, '_self');
                    }
                }
            }
        });
    });
    </script>
    {% block javascript %}
    {% endblock %}
</body>

</html>
